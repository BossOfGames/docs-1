"use strict";(self.webpackChunkphpvms_docs=self.webpackChunkphpvms_docs||[]).push([[6068],{7870:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>d});var i=a(4848),t=a(8453);const s={id:"configmaps",title:"Config Maps"},l=void 0,r={id:"acars/configmaps",title:"Config Maps",description:'Since developers often use custom offsets or datarefs, and not the defaults, having configmaps allows you to map an aircraft feature (landing lights, etc) to a "feature", which tells ACARS where to read the data for those features. They\'re stored in the configmaps directory.',source:"@site/docs/acars/configmaps.md",sourceDirName:"acars",slug:"/acars/configmaps",permalink:"/acars/configmaps",draft:!1,unlisted:!1,editUrl:"https://github.com/phpvms/docs/tree/master/docs/acars/configmaps.md",tags:[],version:"current",frontMatter:{id:"configmaps",title:"Config Maps"},sidebar:"docs",previous:{title:"Customization",permalink:"/acars/customization"},next:{title:"Getting Help",permalink:"/help"}},o={},d=[{value:"Anatomy of a ConfigMap",id:"anatomy-of-a-configmap",level:2},{value:"Features",id:"features",level:2},{value:"Mapping data to a feature",id:"mapping-data-to-a-feature",level:3},{value:"Ignoring Features",id:"ignoring-features",level:3},{value:"Flaps",id:"flaps",level:3},{value:"Examples",id:"examples",level:3},{value:"Creating a config map",id:"creating-a-config-map",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:['Since developers often use custom offsets or datarefs, and not the defaults, having configmaps allows you to map an aircraft feature (landing lights, etc) to a "feature", which tells ACARS where to read the data for those features. They\'re stored in the ',(0,i.jsx)(n.code,{children:"configmaps"})," directory."]}),"\n",(0,i.jsxs)(n.p,{children:["The configmaps are downloaded by the client on startup from the ",(0,i.jsx)(n.a,{href:"https://github.com/phpvms/configmaps",children:"configmaps repository"}),", so updates can be more easily pushed out."]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"Config maps are now only for FSX/P3D or X-Plane. A lot of developers use the default offsets or datarefs, so it may not be required to change anything"})}),"\n",(0,i.jsxs)(n.p,{children:["If you create a configmap for an aircraft, please let me know, I can include it in ACARS to be distributed out. That would be much appreciated! ",(0,i.jsx)(n.strong,{children:"Always create a new file"}),", otherwise the defaults that are included with the distribution will be overwritten by an updates."]}),"\n",(0,i.jsx)(n.h2,{id:"anatomy-of-a-configmap",children:"Anatomy of a ConfigMap"}),"\n",(0,i.jsx)(n.p,{children:"A config map is an XML file which looks like this:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",metastring:'title="configmaps/FlightFactorA320.xml (truncated)"',children:'<?xml version="1.0" encoding="utf-8" ?>\n<Rules>\n  <Rule Simulator="X-Plane" TitleContains="FlightFactor A320">\n    \x3c!-- ... --\x3e\n    <LandingLights>\n      <Key Type="Int" Key="a320/Overhead/LightLandL" Value="1|2"/>\n      <Key Type="Int" Key="a320/Overhead/LightLandR" Value="1|2"/>\n    </LandingLights>\n    \x3c!-- ... --\x3e\n  </Rule>\n</Rules>\n'})}),"\n",(0,i.jsx)(n.p,{children:"A rule defines:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Who the rule is for","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The simulator it's for (either ",(0,i.jsx)(n.code,{children:"X-Plane"})," or ",(0,i.jsx)(n.code,{children:"FSX/Prepar3d"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:['The aircraft title contains. This is how it\'s filtered. It must be broad but also specific to make sure it "catches" the right plane type.',"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'Each word is looked for and it\'s AND\'d. In the example above, "FlightFactor" and "A320" must be present'}),"\n",(0,i.jsxs)(n.li,{children:["For FSX/P3d, the value looked at is the aircraft title field, offset ",(0,i.jsx)(n.code,{children:"0x3D00"})]}),"\n",(0,i.jsxs)(n.li,{children:["For X-Plane, the value looked at is ",(0,i.jsx)(n.code,{children:"sim/aircraft/view/acf_descrip"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["The feature (see below)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'The maps - a group of datarefs or offsets which constitute that feature being "on" or "enabled"'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:'In the above example, for the FlightFactor A320, the landing lights are controlled by two datarefs, both of which the values need to be 1 or 2 for the landing lights to be considered "on".'}),"\n",(0,i.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,i.jsx)(n.p,{children:"The base rules and rule types are available. This list may be expanded in the future."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"BeaconLights"}),"\n",(0,i.jsx)(n.li,{children:"LandingLights"}),"\n",(0,i.jsx)(n.li,{children:"NavigationLights"}),"\n",(0,i.jsx)(n.li,{children:"StrobeLights"}),"\n",(0,i.jsx)(n.li,{children:"TaxiLight"}),"\n",(0,i.jsx)(n.li,{children:"WingLight"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"mapping-data-to-a-feature",children:"Mapping data to a feature"}),"\n",(0,i.jsxs)(n.p,{children:["Each ",(0,i.jsx)(n.code,{children:"Key"})," consists a ",(0,i.jsx)(n.code,{children:"Type"}),", ",(0,i.jsx)(n.code,{children:"Key"})," and a ",(0,i.jsx)(n.code,{children:"Value"}),'. These are all "AND" together, so every value in the feature must evaluate to true.']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",metastring:"title=Example Rule",children:'<Key Type="Int" Key="a320/Overhead/LightLandL" Value="1|2"/>\n'})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Type"}),", which can be:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Bool"})," - a ",(0,i.jsx)(n.code,{children:"Value"})," is not required, the sim returns a ",(0,i.jsx)(n.code,{children:"1"})," or ",(0,i.jsx)(n.code,{children:"0"})," for this value"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Byte"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Number"}),"/",(0,i.jsx)(n.code,{children:"Double"}),"/",(0,i.jsx)(n.code,{children:"Float"})]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Int"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Short"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Mask"})," - Find a value in a bit mask"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"String"})," - look for exactly matches"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"IntArray"}),"/",(0,i.jsx)(n.code,{children:"FloatArray"})," - (X-Plane) - where the DataRef returns an array of integers or floats"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"LVar"})," - Look for an LVar value (",(0,i.jsx)(n.strong,{children:"Microsoft Flight Simulator only"}),")"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Key"})," - This is where ACARS will look to get the value.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"FS9/FSX/Prepar3d"})," - This is an FSUIPC offset. LVars aren't supported, though you can use LINDA and FSUIPC to map an LVAR to a custom offset, and read it here. This information is up to the aircraft developer to provide.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"NOTE"}),' You can use "FSUIPC" and it will detect it for the Prepar3d/FS9/FSX family']}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"X-Plane"}),"/",(0,i.jsx)(n.code,{children:"xplane"})," - This is the dataref value"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Microsoft Flight"}),"/",(0,i.jsx)(n.code,{children:"MSFS"})," - The name of the LVar to use"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Value specifier, must be one of:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Value"})," - this is what value to look for, in the case of a non-boolean type. You can use the OR operator (",(0,i.jsx)(n.code,{children:"|"}),") to separate multiple values"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ValueGt"}),"/",(0,i.jsx)(n.code,{children:"ValueGte"})," - Value greater than or greater than equal to, respectively"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ValueLt"}),"/",(0,i.jsx)(n.code,{children:"ValueLte"})," - Value less than or less than or equal to, respectively"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ValueBtwn"})," - Value between; this must include two values like ",(0,i.jsx)(n.code,{children:"0|1"}),", and will include the first value up to the first"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Index"})," (required for ",(0,i.jsx)(n.code,{children:"IntArray"})," and ",(0,i.jsx)(n.code,{children:"FloatArray"}),")","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"If using the above types, which index of the array to look for the value in (starts from 0)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["A note for X-Plane: the ",(0,i.jsx)(n.code,{children:"sim/cockpit/electrical"})," datarefs are usually not great to use - X-Plane emulates the electrical system, so the values may toggle between 0 and 1, for example, when the strobe light is blinking, the electrical will toggle between 0 and 1. These would show up as the strobe being on. You generally want to check any switches (see Debugging below)"]})}),"\n",(0,i.jsx)(n.h3,{id:"ignoring-features",children:"Ignoring Features"}),"\n",(0,i.jsxs)(n.p,{children:["To ignore a feature in the rules (for example, if a feature doesn't work properly), add ",(0,i.jsx)(n.code,{children:'Ignore="True"'})," to the feature:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<LandingLights Ignore="True">\n'})}),"\n",(0,i.jsx)(n.p,{children:"This will then ignore any landing light rules for that specific aircraft. You can also ignore a specific value, like if a switch has a 3 positions - 0 for off, 1 for on, and 3 for auto, you can ignore a rule with the value of 3:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<LandingLights IgnoreIf="3">\n  <Key Type="Int" Key="a320/Overhead/LightLandL" Value="1|2"/>\n  <Key Type="Int" Key="a320/Overhead/LightLandR" Value="1|2"/>\n</LandingLights>\n'})}),"\n",(0,i.jsxs)(n.p,{children:["In this case, all of the ",(0,i.jsx)(n.code,{children:"Key"})," values must match ",(0,i.jsx)(n.code,{children:"3"})," in order for it to be ignored in any landing lights rules. In this next example, it's reading from an array of integers that's returned by the sim, looking at the 2nd index, and ignoring the value if it's a 3:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<StrobeLights IgnoreIf="3">\n  <Key Type="IntArray" Index="1" Key="some/integer/array" Value="1|2"/>\n</LandingLights>\n'})}),"\n",(0,i.jsx)(n.h3,{id:"flaps",children:"Flaps"}),"\n",(0,i.jsx)(n.p,{children:"You can also add the flaps naming to specific aircraft which might have different values. The flaps have an numeric index value that's reported and then a corresponding flap name:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<Rule Simulator="X-Plane" TitleContains="Some Aircraft Name">\n  <Flaps>\n    <Flap Index="0" Text="Up" />\n    <Flap Index="1" Text="CONF 1+1" />\n    <Flap Index="2" Text="CONF 2" />\n    <Flap Index="3" Text="CONF 3" />\n    <Flap Index="4" Text="CONF FULL" />\n  </Flaps>\n</Rule>\n'})}),"\n",(0,i.jsx)(n.p,{children:'Then these flaps settings will be used over the generic aircraft ICAO flaps namings. You can also ignore a flap state if it\'s a "no-op" state:'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<Rule Simulator="X-Plane" TitleContains="Some Aircraft Name">\n  <Flaps>\n    <Flap Index="0" Text="Up" />\n    <Flap Index="1" Text="" Ignore="True" />\n    <Flap Index="2" Text="CONF 2" />\n    <Flap Index="3" Text="CONF 3" />\n    <Flap Index="4" Text="CONF FULL" />\n  </Flaps>\n</Rule>\n'})}),"\n",(0,i.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["In this example, both of the datarefs, in this last, the left and right landing lights, must have a value of ",(0,i.jsx)(n.code,{children:"1"})," or ",(0,i.jsx)(n.code,{children:"2"}),' in order for the landing lights to be considered "on". This aircraft config also has differing flap names.']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<Rule Simulator="X-Plane" TitleContains="Some Aircraft Name">\n  <LandingLights>\n      <Key Type="Int" Key="a320/Overhead/LightLandL" Value="1|2"/>\n      <Key Type="Int" Key="a320/Overhead/LightLandR" Value="1|2"/>\n  </LandingLights>\n  <Flaps>\n    <Flap Index="0" Text="Up" />\n    <Flap Index="1" Text="CONF 1+1" />\n    <Flap Index="2" Text="CONF 2" />\n    <Flap Index="3" Text="CONF 3" />\n    <Flap Index="4" Text="CONF FULL" />\n  </Flaps>\n</Rule>\n'})}),"\n",(0,i.jsx)(n.p,{children:"In this example for FSUIPC, the offsets use a bitmask to consider the beacon lights being on:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<Rule Simulator="Prepar3d" TitleContains="Some Aircraft Name">\n  <BeaconLights>\n      <Key Type="Mask" Key="0x0D0C" Value="2"/>\n  </BeaconLights>\n</Rule>\n'})}),"\n",(0,i.jsx)(n.p,{children:"For the remaining features, the X-Plane defaults will be used."}),"\n",(0,i.jsx)(n.h2,{id:"creating-a-config-map",children:"Creating a config map"}),"\n",(0,i.jsx)(n.p,{children:"To create a config map, you can copy one of the existing files and modify it."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The file must be in the ",(0,i.jsx)(n.code,{children:"configmaps/"})," directory"]}),"\n",(0,i.jsx)(n.li,{children:"Name the file as specific as possible"}),"\n",(0,i.jsx)(n.li,{children:"Don't edit existing ones, they'll get overwritten"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>l,x:()=>r});var i=a(6540);const t={},s=i.createContext(t);function l(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);